<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head('Administrator')}">
</head>
<!--name description category country-->
<body th:replace="~{layout :: base(~{::section})}">
    <section>
        <div>
            <h2>발행처</h2>
            <div>
                <a class="btn btn-primary mb-1" th:href="@{/admin/inputSources}" th:text="'발행처 갱신'">발행처 갱신</a>
            </div>
<!-- bootstrap을 이용하여 '발행처 갱신' 버튼 만들기 -> 버튼에 /inputSources 연결하기 -->
            <div class="alert alert-danger" role="alert" th:if="${error}">
                <p th:text="${error}"></p>
            </div>
        </div>


    <table class="table table-striped table-hover">
        <thead class="table-dark">
        <tr>
            <th scope="col">name</th>
            <th scope="col">description</th>
            <th scope="col">category</th>
            <th scope="col">country</th>
        </tr>
    </thead>
        <tbody>
            <tr th:each="src : ${sources.content}">
                <td>
                    <a th:href="${src.url}" th:text="${src.name}"></a>
                </td>
                <td th:text="${src.description}"></td>
                <td th:text="${src.category}"></td>
                <td th:text="${src.country}"></td>
            </tr>
        </tbody>
    </table>

        <!-- 페이지 제어기(페이지네이션) -->
        <nav>
            <ul class="pagination justify-content-center my-3">
                <!-- 처음 -->
                <li class="page-item" th:classappend="${sources.first} ? 'disabled'">
                    <a class="page-link" href="@{/admin/source(page=0, size=${sources.size})}">처음</a>
                </li>
                <!-- 이전 -->
                <li class="page-item" th:classappend="${sources.first} ? 'disabled'">
                    <a class="page-link" href="@{/admin/source(page=${sources.number-1}, size=${sources.size})}">이전</a>
                </li>
                <!-- 페이지 번호(최대 10개) -->
                <li class="page-item"
                    th:each="i : ${#number.sequence(sources.number/10)*10,
                                                    T(java.lang.Math).min((sources.number/10)*10+9, sources.totalPages-1))}"
                    th:classappend="${sources.number == i} ? active"
                >
                    <a class="page-link"
                       th:href="@{/admin/source(page=${i}, size=${sources.size})}"
                        th:text="${i+1}">0</a>
                </li>
                <!-- 다음 -->
                <!-- 마지막 -->
                <li></li>
            </ul>
        </nav>
    </section>
    <div th:replace="~{layout :: bootstrap_script}"></div>
</body>
</html>